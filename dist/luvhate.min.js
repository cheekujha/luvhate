/*! luvhate 16-06-2015 */
!function(){function Base(){this._klass="Base"}Base.extend=function(sub_klass){var base=new this;sub_klass.prototype=base,sub_klass.prototype._klass=sub_klass,sub_klass.prototype._klass_name=sub_klass.name,sub_klass.prototype.constructor=sub_klass,sub_klass._super_klass=this,this._sub_klasses=this._sub_klasses||[],this._sub_klasses.push(sub_klass),sub_klass.extend=arguments.callee,sub_klass.getSubClasses=Base.subClasses;for(var prop in this)if(this.hasOwnProperty(prop)&&"extend"!==prop&&!prop.match(/_.*/)){var val=this[prop];"function"==typeof val?sub_klass[prop]=val:val instanceof Array?sub_klass[prop]=[].concat(val):"object"==typeof prop?sub_klass[prop]=$.extend(!0,{},val):sub_klass[prop]=val}},Base.getSubClasses=function(){return this._sub_klasses},window.Base=Base}(window),function(window){function initialize(callback){dbConnection=Oracle.DESKTOP?window.openDatabase(databaseName,"1.0",databaseDesc,databaseSize,databaseConnected):window.sqlitePlugin.openDatabase(databaseName,"1.0",databaseDesc,databaseSize,databaseConnected),initTables(function(){isInitialized=!0,callback&&callback()}),window.dbConnection=dbConnection}function databaseConnected(){}function isDatabaseInitialized(){return isInitialized}function initTables(callback){var allTables=tables.slice();createTables(allTables,callback)}function createTables(listOfTables,callback){if(0===listOfTables.length)return void(callback&&callback());var currentTable=listOfTables.shift();createTable(currentTable,listOfTables,callback)}function deleteRows(tableName,options,callback){var sql,key,conds=[],params=[];sql="DELETE from "+tableName+" ";for(key in options)options.hasOwnProperty(key)&&(conds.push(" "+key+" = ? "),params.push(options[key]));conds.length>0&&(sql+=" WHERE "+conds.join(" AND ")),Database.exec(sql,params,function(tx,result){callback&&callback()},Database.onError)}function createTable(table,tableList,callback){var sql,i,l,columns=window[table]._columns,tableName=window[table].table_name,colStr="(";for(sql="CREATE TABLE IF NOT EXISTS "+tableName,i=0,l=columns.length;l>i;i+=1)colStr=colStr+columns[i].name+" "+columns[i].type,"undefined"!=typeof columns[i]["default"]&&(colStr=colStr+" DEFAULT "+columns[i]["default"]),colStr+=",";colStr=colStr.substring(0,colStr.length-1),sql=sql+colStr+")",Database.exec(sql,[],function(tx,result){createTables(tableList,callback)},Database.onError)}function insert(tableName,options,callback){var sql,key,colNames=[],colValues=[],qMarks=[];for(key in options)options.hasOwnProperty(key)&&(colNames.push(key),colValues.push(options[key]),qMarks.push("?"));sql="INSERT INTO "+tableName+"("+colNames.join(",")+") VALUES("+qMarks.join(",")+")",Database.exec(sql,colValues,function(tx,result){result.rowsAffected?callback&&callback({insertId:result.insertId,id:result.insertId}):callback&&callback({insertId:null,id:null})},Database.onError)}function update(tableName,options,callback){var sql="UPDATE "+tableName,params=[],conds=[],sets=[],set=options.set;for(var key in set)set.hasOwnProperty(key)&&(sets.push(" "+key+" = ? "),params.push(serializeArrayValues(set[key])));sets.length>0&&(sql+=" SET "+sets.join(" , "));var where=options.where;where._conditions&&(conds.push(where._conditions),delete where._conditions);for(key in where)where.hasOwnProperty(key)&&(conds.push(" "+key+" = ? "),params.push(where[key]));conds.length>0&&(sql+=" WHERE "+conds.join(" AND ")),Database.exec(sql,params,function(tx,result){callback&&callback(result)},Database.onError)}function serializeArrayValues(value){return"[object Array]"===toString.call(value)?value.length>0?value.join(","):null:value}function findAll(tableName,options,callback){var query=Database.selectQuery(tableName,options);Database.exec(query.sql,query.params,function(tx,result){if(options.result=new Array,result.rows&&"undefined"!=typeof result.rows&&result.rows.length>0)for(var i=0;i<result.rows.length;i++)options.result.push(Database.getResultRow(result,i));callback(options.result)},Database.onError)}function selectQuery(tableName,options){var sql="SELECT ",conds=[],params=null;if(sql+=options.select?options.select.join(","):"*",sql+=" FROM "+tableName,options.conditions&&conds.push(options.conditions),options.where){params=[];for(var key in options.where)conds.push(key+" = ?"),params.push(options.where[key])}return 0!==conds.length&&(sql+=" WHERE "+conds.join(" AND ")),options.order&&(sql+=" ORDER BY "+options.order),options.limit&&(sql+=" LIMIT "+options.limit),{sql:sql,params:params}}function getResultRow(result,index){return result.rows.item(index)}function onError(){alert("Database Error")}function exec(query,params,onSuccess,onError){var successFn=function(){onSuccess&&onSuccess.apply(this,arguments)},errorFn=function(){onError&&onError.apply(this,arguments)};dbConnection.transaction(function(tx){tx.executeSql(query,params,successFn,errorFn)})}var dbConnection,Database={},databaseName=window.APPNAME,databaseDesc="Database for luvhate App",databaseSize=2097152,tables=["User"],isInitialized=!1;Database.initialize=initialize,Database.insert=insert,Database.exec=exec,Database.onError=onError,Database.initTables=initTables,Database.update=update,Database.findAll=findAll,Database.selectQuery=selectQuery,Database.getResultRow=getResultRow,Database.isDatabaseInitialized=isDatabaseInitialized,Database.deleteRows=deleteRows,window.Database=Database}(window),function(){function Model(){}function updateModel(obj,set,callback){Model.writingIntoDatabaseCounter++,obj.column_names.indexOf("updated_at")>=0&&(obj.updated_at=$.date.now(),set.updated_at=obj.updated_at),set=fillEmptyWithNull(set,obj._column_names),BUILD&&WRITE_ID_TABLES.indexOf(obj.table_name)>=0&&(AppHelper.exists(MEM.write_id)?set.write_id=MEM.write_id:alert("write id not found")),set=encodeBool(set,obj._klass._bool_columns);var setOptions={set:set,where:{id:obj.id}};SPMathDB.update(obj.table_name,setOptions,function(){Model.writingIntoDatabaseCounter--,callback&&callback()})}function encodeBool(obj,bool_columns){for(var attr,i=0;i<bool_columns.length;i++)attr=bool_columns[i],obj.hasOwnProperty(attr)&&null!=obj[attr]&&(obj[attr]=AppHelper.checkBool(obj[attr])?1:0);return obj}function decodeBool(obj,bool_columns){for(var attr,val,i=0;i<bool_columns.length;i++)attr=bool_columns[i],obj.hasOwnProperty(attr)&&null!==obj[attr]&&void 0!==obj[attr]&&(val=$.trim(obj[attr].toString()).toLowerCase(),obj[attr]="t"===val||"1"===val);return obj}function _prepareFinders(sub_class){for(var key,func_key,keys=sub_class._finders,func_names=["","All"],i=0;i<keys.length;i++){key=keys[i],$.isArray(key)||(key=[key]),func_key=key.map(function(a){return formatKey(a)}).join("And");for(var j=0;j<func_names.length;j++)sub_class["find"+func_names[j]+"By"+func_key]=function(fname,keys){return function(){for(var options={},i=0;i<keys.length;i++)options[keys[i]]=arguments[i];return this["find"+fname+"ByOptions"](options)}}(func_names[j],key)}}function setDefaults(obj,default_values){for(var column in default_values)default_values.hasOwnProperty(column)&&void 0===obj[column]&&(obj[column]=default_values[column]);return obj}function formatKey(key){return key=$.string.toCamelCase(key),key.substr(0,1).toUpperCase()+key.substr(1)}function fillEmptyWithNull(object,columns){if(columns)for(var i=0;i<columns.length;i++)void 0===object[columns[i]]&&(object[columns[i]]=null);return object}Model.writingIntoDatabaseCounter=0,Base.extend(Model),Model.extend=function(sub_class){Base.extend.call(this,sub_class),void 0===sub_class._table_name&&(sub_class._table_name=sub_class.name.toUnderScore()+"s"),sub_class._finders&&_prepareFinders(sub_class),sub_class.all=[]},Model.primaryKey=function(){return void 0===this._primary_key?"id":this._primary_key},Model.find=function(value){return $.isArray(value)?Model.findAllByColumnName(this.primaryKey(),value):this.findByColumnName(this.primaryKey(),value)},Model.findAll=function(values){return values?this.findAllByColumnName(this.primaryKey(),values):this.all},Model.findByColumnName=function(columnName,value){var options={};return value=$.isArray(value)?value[0]:value,options[columnName]=value,this.findAllByOptions(options,!0)},Model.findAllByColumnName=function(columnName,value){var options={};return options[columnName]=value,this.findAllByOptions(options)},Model.findByOptions=function(options){return this.findAllByOptions(options,!0)},Model.findAllByOptions=function(options,onlyFirst){var instances=[];if(this.all&&this.all.length>0)for(var i=0;i<this.all.length;i++){var instance=this.all[i],match=!0;for(var key in options)options.hasOwnProperty(key)&&(match=$.isArray(options[key])?match&&options[key].indexOf(instance[key]>=0):match&&instance[key]===options[key]);if(match){if(onlyFirst)return instance;instances.push(instance)}}return onlyFirst?instances[0]:instances},Model.load=function(options,callback){"function"==typeof options?(callback=options,options={}):options=options||{};var that=this;Databse.findAll(this._table_name,options,function(rows){void 0===that.all&&(that.all=[]);var new_rows=rows.map(function(row){return new that($.extend(!0,{},row))});that.all=$.array.subtract(that.all,new_rows,that.equals),that.all=that.all.concat(new_rows),callback&&callback()})},Model.equals=function(inst1,inst2){return inst1.id==inst2.id},Model.loadAll=function(column_name,ids,callback){var options={};$.isArray(ids)?(ids=$.array.select(ids,function(id){return null!==id&&void 0!==id&&0!=id.length}),options.conditions=column_name+" in ('"+ids.join("','")+"')"):(options.where={},options.where[column_name]=ids),this.load(options,callback)},Model.create=function(instance,callback){Model.writingIntoDatabaseCounter++;var insert_data,now_time=$.date.now(),klass=this;instance.id=uuid(),this._column_names.indexOf("created_at")>=0&&(instance.created_at=now_time),this._column_names.indexOf("updated_at")>=0&&(instance.updated_at=now_time),insert_data=instance.dump(),BUILD&&WRITE_ID_TABLES.indexOf(this._table_name)>=0&&(AppHelper.exists(MEM.write_id)?insert_data.write_id=MEM.write_id:alert("write id not found "+MEM.write_id)),insert_data=encodeBool(insert_data,this._bool_columns),SPMathDB.insert(this._table_name,insert_data,function(options){klass.all.push(instance),callback&&callback(),Model.writingIntoDatabaseCounter--})},Model.insert=function(instance,callback){this.create(instance,callback)},Model.deleteRows=function(options,callback){SPMathDB.deleteRows(this._table_name,options,callback)},Model.prototype.init=function(seed){this.column_names=this._klass._column_names,this.table_name=this._klass._table_name;var attrs=this.column_names;if(seed=seed||{},seed=decodeBool(seed,this._klass._bool_columns),void 0===seed[this._klass.primaryKey()]&&(seed=setDefaults(seed,this._klass._defaults)),attrs)for(var i=0;i<attrs.length;i++)this[attrs[i]]=void 0===seed[attrs[i]]?null:seed[attrs[i]];STORE_POPULATED&&Associations.bind.one(this)},Model.prototype.save=function(callback,create){this.newRecord()?this._klass.create(this,callback):this.update(callback)},Model.prototype.update=function(callback){updateModel(this,this.dump(),callback)},Model.prototype.updateAttribute=function(attr,value){var set={};"object"==typeof attr?set=attr:set[attr]=value,this.updateAttributes(set)},Model.prototype.updateAttributes=function(updateOptions){for(var key in updateOptions)updateOptions.hasOwnProperty(key)&&this.column_names.indexOf(key)>=0&&(this[key]=updateOptions[key]);updateModel(this,updateOptions)},Model.prototype.destroy=function(callback){var options={},that=this;options[this.primaryKey()]=this[this.primaryKey()],this.column_names.indexOf("deleted_at")>=0&&(this.deleted_at=$.date.now()),this._klass.deleteRows(options,function(){that._klass.all=$.array.subtract(that._klass.all,[that]),"function"==typeof callback&&callback()})},Model.prototype.dump=function(){var dump={},columns=this.column_names;if(columns)for(var i=0;i<columns.length;i++)dump[columns[i]]=this[columns[i]];return dump},Model.prototype.newRecord=function(){return void 0===this.id||null===this.id?!0:!1},Model.belongsTo=function(prop_name,options){Associations.declare.belongsTo(this.name,prop_name,options)},Model.hasOne=function(prop_name,options){Associations.declare.hasOne(this.name,prop_name,options)},Model.hasMany=function(prop_name,options){Associations.declare.hasMany(this.name,prop_name,options)},uuid=function(){var rfc4_id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)});return rfc4_id.replace(/-/g,"").toUpperCase()},window.Model=Model}(window),function(window){function User(seed){this.init(seed)}function setDefaults(obj,columns){var i,l;for(i=0,l=columns.length;l>i;i+=1)"undefined"==typeof obj[columns[i].name]&&"undefined"!=typeof columns[i]["default"]&&(obj[columns[i].name]=columns[i]["default"]);return obj}function updateModel(obj,set,callback){set=fillEmptyWithNull(set,User._columns);var setOptions={set:set,where:{id:obj.id}};Database.update(User.table_name,setOptions,function(){callback&&callback()})}function fillEmptyWithNull(object,columns){if(columns)for(var i=0;i<columns.length;i++)void 0===object[columns[i].name]&&(object[columns[i].name]=null);return object}User._columns=[{name:"id",type:"TEXT"},{name:"access_token",type:"TEXT"},{name:"logged_in",type:"INTEGER","default":0},{name:"love_count",type:"INTEGER","default":0},{name:"hate_count",type:"INTEGER","default":0},{name:"name",type:"TEXT"},{name:"fb_id",type:"TEXT"},{name:"gender",type:"TEXT"}],User.table_name="users",User.primaryKey="id",User.all=[],User.find=function(){},User.create=function(instance,callback){var insert_data;insert_data=instance.dump(),Database.insert(User.table_name,insert_data,function(options){User.all.push(instance.dump()),callback&&callback(instance.dump())})},User.findAll=function(){},User.find=function(id,callback){var opts={where:{id:id}};Database.findAll(User.table_name,opts,function(results){console.log(".>>>>>>>>>>>>>>...find....................",results),callback&&callback(results)})},User.findAllLoggedIn=function(callback){var opts={where:{logged_in:1}};Database.findAll(User.table_name,opts,function(results){console.log(".>>>>>>>>>>>>>>.......................",results),callback&&callback(results)})},User.deleteRows=function(options,callback){Database.deleteRows(User.table_name,options,callback)},User.prototype.init=function(seed){var columns=User._columns,attrs=columns;if(seed=seed||{},void 0===seed[User.primaryKey]&&(seed=setDefaults(seed,columns)),attrs)for(var i=0;i<attrs.length;i++)this[attrs[i].name]=void 0===seed[attrs[i].name]?null:seed[attrs[i].name]},User.prototype.save=function(create,callback){create===!0?User.create(this,callback):(callback||("function"==typeof create?callback=create:""),this.update(callback))},User.prototype.update=function(callback){updateModel(this,this.dump(),callback)},User.prototype.newRecord=function(){return void 0===this.id||null===this.id?!0:!1},User.prototype.dump=function(){var dump={},columns=User._columns;if(columns)for(var i=0;i<columns.length;i++)dump[columns[i].name]=this[columns[i].name];return dump},uuid=function(){var rfc4_id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)});return rfc4_id.replace(/-/g,"").toUpperCase()},window.User=User}(window),function(window,angular){angular.module("detailsScreen",[])}(window,angular),function(window,angular){function detailsScreenCtrl($scope,$stateParams,$q){function init(){userId=$stateParams.id,getImage().then(getImageSuccess,getImageError)}function getImage(){var defer=$q.defer(),imageWidth=$(".user-image").outerHeight()-20,userImg=new Image;return userImg.src="https://graph.facebook.com/v2.0/"+userId+"/picture?redirect=true&width="+imageWidth+"&height="+imageWidth,vm.userImageStyle={width:imageWidth+"px",height:imageWidth+"px"},userImg.onload=function(){defer.resolve(userImg)},defer.promise}function getImageSuccess(image){vm.imageUrl=image.src}function getImageError(){vm.imageUrl=void 0}var userId,vm=this;init()}angular.module("detailsScreen").controller("detailsScreenCtrl",detailsScreenCtrl),detailsScreenCtrl.$inject=["$scope","$stateParams","$q"]}(window,angular),function(window,angular){angular.module("facebook",[])}(window,angular),function(window,angular){function facebookFactory($q,uiLoaderFactory){function browserInit(id,version){this.appID=id,this.appVersion=version||"v2.3",facebookConnectPlugin.browserInit(this.appID,this.appVersion)}function login(permissions){var q=$q.defer();return startLoader(),facebookConnectPlugin.login(permissions,function(res){stopLoader(),q.resolve(res)},function(res){stopLoader(),q.reject(res)}),q.promise}function showDialog(options){var q=$q.defer();return startLoader(),facebookConnectPlugin.showDialog(options,function(res){stopLoader(),q.resolve(res)},function(err){stopLoader(),q.reject(err)}),q.promise}function api(path,permissions){var q=$q.defer();return startLoader(),facebookConnectPlugin.api(path,permissions,function(res){stopLoader(),q.resolve(res)},function(err){stopLoader(),q.reject(err)}),q.promise}function getAccessToken(){var q=$q.defer();return startLoader(),facebookConnectPlugin.getAccessToken(function(res){stopLoader(),q.resolve(res)},function(err){stopLoader(),q.reject(err)}),q.promise}function getLoginStatus(){var q=$q.defer();return startLoader(),facebookConnectPlugin.getLoginStatus(function(res){stopLoader(),lastLoginStatusAt=Date.now(),q.resolve(res)},function(err){stopLoader(),q.reject(err)}),q.promise}function isLoggedIn(){if(isValidToken()){var dummyDefer=$q.defer();return dummyDefer.resolve(),dummyDefer.promise}return getLoginStatus()}function isValidToken(){if(lastLoginStatusAt){var currentTime=Date.now();return tokenValidTill>currentTime-lastLoginStatusAt?!0:!1}return!1}function logout(){var q=$q.defer();return startLoader(),facebookConnectPlugin.logout(function(res){stopLoader(),q.resolve(res)},function(err){stopLoader(),q.reject(err)}),q.promise}function startLoader(){uiLoaderFactory.showLoader()}function stopLoader(){uiLoaderFactory.hideLoader()}var lastLoginStatusAt,tokenValidTill=2592e6;return{browserInit:browserInit,login:login,showDialog:showDialog,api:api,getAccessToken:getAccessToken,getLoginStatus:getLoginStatus,logout:logout,isLoggedIn:isLoggedIn}}angular.module("facebook").factory("facebookFactory",facebookFactory),facebookFactory.$inject=["$q","uiLoaderFactory"]}(window,angular),function(window,angular){angular.module("feelsListItem",[])}(window,angular),function(window,angular){function feelsListItemCtrl($scope,userFactory){function init(){initMethods()}function initMethods(){vm.toggleButtonPanel=toggleButtonPanel,vm.relationButtonClicked=relationButtonClicked}function toggleButtonPanel(){}function relationButtonClicked(type){userFactory.postRelation(vm.feel.receiver_id,vm.feel.receiver_name,type).then(postRelationSuccess,postRelationError)}function postRelationSuccess(response){console.log(">.........postRelationSuccess.............".response),response&&(vm.feel.type=response.type?response.type:void 0,vm.feel.showButtonPanel=!1)}function postRelationError(response){console.log(">.........postRelationError.............".response)}var vm=this;init()}angular.module("feelsListItem").controller("feelsListItemCtrl",feelsListItemCtrl),feelsListItemCtrl.$inject=["$scope","userFactory"]}(window,angular),function(window,angular){function feelsListItem(){return{restrict:"E",scope:{feel:"="},templateUrl:"modules/feels-list-item/partials/FeelsListItem.html",controller:"feelsListItemCtrl",controllerAs:"vm",link:function(scope,element,attrs,ctrl){ctrl.feel=scope.feel,scope.$watch("feel",function(newVal,oldVal){newVal&&(ctrl.feel=scope.feel)})}}}angular.module("feelsListItem").directive("feelsListItem",feelsListItem),feelsListItem.$inject=[]}(window,angular),function(window,angular){angular.module("feelsList",[])}(window,angular),function(window,angular){function feelsListCtrl($scope,userFactory){function init(){initMethods(),initListeners(),getFeelsList()}function initMethods(){}function initListeners(){}function getFeelsList(){vm.allFeels=userFactory.getAllRelations()}var vm=this;init()}angular.module("feelsList").controller("feelsListCtrl",feelsListCtrl),feelsListCtrl.$inject=["$scope","userFactory"]}(window,angular),function(window,angular){angular.module("loader",[])}(window,angular),function(window,angular){function uiLoader(uiLoaderFactory){return{restrict:"E",scope:{},template:templateStr,link:function(scope,element,attrs){scope.showLoader=!1,scope.$watch(function(){return uiLoaderFactory.isDisplayed()},function(newVal,oldVal){newVal?(scope.showLoader=!0,scope.message=uiLoaderFactory.getMessage()):scope.showLoader=!1})}}}angular.module("loader").directive("uiLoader",uiLoader),uiLoader.$inject=["uiLoaderFactory"];var templateStr="<div ng-show='showLoader' class='loader-block-screen'><div class='loader'><div class='loader-icon'></div></div></div>"}(window,angular),function(window,angular){function uiLoaderFactory($log,$timeout){function showLoader(msg){message=msg?msg:"Loading...",0===count&&(show=!0),count+=1}function hideLoader(){count-=1,0===count&&(show=!1)}function getMessage(){return message}function toogleLoader(){show=!show}function isDisplayed(){return show}var show=!1,message="Loading...",count=0;return uiLoaderFactory.show=!1,{show:!1,isDisplayed:isDisplayed,showLoader:showLoader,getMessage:getMessage,hideLoader:hideLoader,toogleLoader:toogleLoader}}angular.module("loader").factory("uiLoaderFactory",uiLoaderFactory),uiLoaderFactory.$inject=["$log","$timeout"]}(window,angular),function(window,angular){angular.module("login",[])}(window,angular),function(window,angular){function loginCtrl($scope,facebookFactory,$state,userFactory){function init(){initMethods()}function initMethods(){vm.facebookLogin=facebookLogin}function facebookLogin(){facebookFactory.login(["user_friends","public_profile"]).then(loginSuccess,loginError)}function loginSuccess(response){facebookFactory.api("/me",[]).then(function(me){myInformationSuccess(me,response.authResponse.accessToken)},myInformationError),console.log("facebookLogin success",response)}function loginError(response){console.log("facebookLogin error",response),$state.go("home.login")}function myInformationSuccess(me,accessToken){console.log("....myInformationSuccess.....",me);var userObj={name:me.name?me.name:null,fb_id:me.id,gender:me.gender,logged_in:1,access_token:accessToken};userFactory.createUserOnServer(userObj).then(userCreateOnServerSuccess,userCreateOnServerError)}function userCreateOnServerSuccess(user){console.log("........userCreateOnServerSuccess......",user),userFactory.createUserOnLocal(user).then(userCreateOnLocalSuccess,userCreateOnLocalError)}function userCreateOnServerError(){$state.go("home")}function myInformationError(err){console.log("....myInformationError.....",err)}function userCreateOnLocalSuccess(user){userFactory.setCurrentUser(user),$state.go("home.profile")}function userCreateOnLocalError(err){}var vm=this;init()}angular.module("login").controller("loginCtrl",loginCtrl),loginCtrl.$inject=["$scope","facebookFactory","$state","userFactory"]}(window,angular),function(window,angular){angular.module("peopleSearch",[])}(window,angular),function(window,angular){function peopleSearchCtrl($scope,peopleSearchFactory,friendSearchFactory,stateFactory,$state){function init(){vm.peopleList=[],vm.showLoadMoreButton=!1,vm.friendList=[],vm.friendListLoaded=!1,initMethods()}function initMethods(){vm.searhclicked=searhclicked,vm.loadMoreClicked=loadMoreClicked,vm.getFriendList=getFriendList,vm.loadMoreFriendClicked=loadMoreFriendClicked,vm.backClicked=backClicked,vm.advanceSearchClicked=advanceSearchClicked,vm.advancedSearchBtnClicked=advancedSearchBtnClicked}function backClicked(){$state.go("home")}function advancedSearchBtnClicked(){vm.showAdvancedSearch=!0,vm.searchCompany=void 0,vm.searchCity=void 0}function advanceSearchClicked(searchText,searchCompany,searchCity,searchElse){if(searchText){var toSearch=searchText+(searchCompany?" "+searchCompany:"")+(searchCity?" "+searchCity:"")+(searchElse?" "+searchElse:"");searhclicked(toSearch,!0,function(){vm.showAdvancedSearch=!1})}}function searhclicked(searchText,emptyList,callback){searchText&&searchText.trim().length>0?(searchTextEntered=searchText,peopleSearchFactory.search(searchText,"user").then(function(list){peopleSearchSuccess(list,emptyList),callback&&callback()},peopleSearchError)):searchTextEntered=null}function peopleSearchSuccess(list,emptyList){if(console.log("searchSuccess",list),list.length>0?vm.showLoadMoreButton=!0:vm.showLoadMoreButton=!1,emptyList&&(vm.peopleList=[],vm.peopleList.length=0),searchTextEntered){var i,l,searchArray=searchTextEntered.split(" ");list=list.filter(function(item){var returnVal=!1;for(i=0,l=searchArray.length;l>i;i+=1){var currentSearchText=searchArray[i].toLowerCase();if(item.name.toLowerCase().indexOf(currentSearchText)>=0){returnVal=!0;break}}return returnVal})}var oldList=vm.peopleList,newList=oldList.concat(list);vm.peopleList=newList}function peopleSearchError(){console.error("searchError")}function loadMoreClicked(){peopleSearchFactory.nextSearch().then(function(list){peopleSearchSuccess(list,!1)},peopleSearchError)}function getFriendList(){vm.friendListLoaded||friendSearchFactory.search().then(friendSearchSuccess,friendSearchError)}function friendSearchSuccess(list){list.length>0?vm.showFriendLoadMoreButton=!0:vm.showFriendLoadMoreButton=!1;var oldList=vm.friendList,newList=oldList.concat(list);vm.friendList=newList,vm.friendListLoaded=!0}function friendSearchError(response){console.log("friendSearchError",response)}function loadMoreFriendClicked(){friendSearchFactory.nextSearch().then(friendSearchSuccess,friendSearchError)}var searchTextEntered,vm=this;init()}angular.module("peopleSearch").controller("peopleSearchCtrl",peopleSearchCtrl),peopleSearchCtrl.$inject=["$scope","peopleSearchFactory","friendSearchFactory","stateFactory","$state"]}(window,angular),function(window,angular){function friendSearchFactory(facebookFactory,$q){function search(){var defer=$q.defer(),path="/me/friends?debug=all";return nextSearchPath=null,friendList=[],facebookFactory.api(path,["user_friends"]).then(function(response){response&&(setFriendList(response.data),setPaginationValues(response.data,response.paging)),defer.resolve(friendList)},function(response){defer.reject()}),defer.promise}function setFriendList(list){list&&list.length>0&&(friendList=friendList.concat(list))}function setPaginationValues(list,pagingData){nextSearchPath=list.length>0&&pagingData?formatNextPath(pagingData.next):null}function nextSearch(){var defer=$q.defer();return nextSearchPath?facebookFactory.api("me/"+nextSearchPath,["user_friends"]).then(function(response){response&&(setFriendList(response.data),setPaginationValues(response.data,response.paging)),defer.resolve(response.data)},function(response){defer.reject(response)}):defer.resolve([]),defer.promise}function formatNextPath(path){if(path){var indexOfSearch=path.indexOf("friends");return indexOfSearch>=0?path.substring(indexOfSearch):null}return null}var friendList=[],nextSearchPath=null;return{search:search,nextSearch:nextSearch}}angular.module("peopleSearch").factory("friendSearchFactory",friendSearchFactory),friendSearchFactory.$inject=["facebookFactory","$q"]}(window,angular),function(window,angular){function peopleSearchFactory(facebookFactory,$q,baseFactory){function search(query,type){var defer=$q.defer(),path="/search?q="+query+"&type="+type;return nextSearchPath=query,nextSearchPath=null,facebookFactory.api(path,[]).then(function(response){response&&(setPeopleList(response.data,!0),setPaginationValues(response.data,response.paging)),defer.resolve(peopleList)},function(response){defer.reject()}),defer.promise}function setPeopleList(list,emptyList){var i,l,listToAdd=[];if(emptyList&&(peopleList=[],peopleListMap={},peopleList.length=0),list&&list.length>0)for(i=0,l=list.length;l>i;i+=1){var currentEntry=list[i];peopleListMap[currentEntry.id]||(peopleList.push(currentEntry),peopleListMap[currentEntry.id]=!0,listToAdd.push(currentEntry))}return listToAdd}function setPaginationValues(list,pagingData){list.length>0&&pagingData?(nextSearchPath=formatNextPath(pagingData.next),nextSearchUrl=pagingData.next):(nextSearchPath=null,nextSearchUrl=null)}function nextSearch(){var defer=$q.defer();return nextSearchPath?facebookFactory.api(nextSearchPath,[]).then(function(response){if(response){var listToAdd=setPeopleList(response.data,!1);setPaginationValues(response.data,response.paging)}defer.resolve(listToAdd)},function(response){defer.reject(response)}):defer.resolve([]),defer.promise}function formatNextPath(path){if(path){var indexOfSearch=path.indexOf("search");return indexOfSearch>=0?path.substring(indexOfSearch):null}return null}var peopleList=[],nextSearchPath=null,nextSearchUrl=null,peopleListMap={};return{search:search,nextSearch:nextSearch}}angular.module("peopleSearch").factory("peopleSearchFactory",peopleSearchFactory),peopleSearchFactory.$inject=["facebookFactory","$q","baseFactory"]}(window,angular),function(window,angular){angular.module("searchListItem",[])}(window,angular),function(window,angular){function searchListItemCtrl($scope,userFactory,facebookFactory,$timeout){function init(){initMethods()}function initMethods(){$scope.toggleButtonPanel=toggleButtonPanel,$scope.relationButtonClicked=relationButtonClicked,self.checkRelation=checkRelation}function checkRelation(){var id=$scope.profile.id,isRelationPresent=userFactory.checkRelationWithId(id);if(isRelationPresent){var relation=userFactory.getRelationWithId(id);$scope.profile.heartType=relation.type?relation.type:void 0}}function toggleButtonPanel(){}function relationButtonClicked(type){var profile=$scope.profile;userFactory.postRelation(profile.id,profile.name,type).then(postRelationSuccess,postRelationError)}function postRelationSuccess(response){response&&$timeout(function(){$scope.profile.heartType=response.type?response.type:void 0,$scope.profile.showButtonPanel=!1,userFactory.addUserRelation(response)},0)}function postRelationError(response){console.log(">.........postRelationError.............".response)}var self=this;init()}angular.module("searchListItem").controller("searchListItemCtrl",searchListItemCtrl),searchListItemCtrl.$inject=["$scope","userFactory","facebookFactory","$timeout"]}(window,angular),function(window,angular){function searchListItem(){return{restrict:"E",scope:{profile:"="},templateUrl:"modules/search-list-item/partials/SearchListItem.html",controller:"searchListItemCtrl",link:function(scope,element,attrs,ctrl){ctrl.profile=scope.profile,ctrl.checkRelation(),scope.$watch("profile",function(newVal,oldVal){newVal&&(ctrl.profile=scope.profile,ctrl.checkRelation())})}}}angular.module("searchListItem").directive("searchListItem",searchListItem),searchListItem.$inject=[]}(window,angular),function(window,angular){angular.module("sidebarLeft",[])}(window,angular),function(window,angular){function sidebarLeftCtrl($scope,$state){function init(){initMethods()}function initMethods(){vm.routeChanged=routeChanged}function routeChanged(route){var currentRoute=$state.current.name;-1==currentRoute.indexOf(route)&&$state.go(route)}var vm=this;init()}angular.module("sidebarLeft").controller("sidebarLeftCtrl",sidebarLeftCtrl),sidebarLeftCtrl.$inject=["$scope","$state"]}(window,angular),function(window,angular){function sidebarLeft(){return{restrict:"E",scope:{},templateUrl:"modules/sidebar-left/partials/SidebarLeft.html",controller:"sidebarLeftCtrl",controllerAs:"vm",link:function(scope,element,attrs,ctrl){}}}angular.module("sidebarLeft").directive("sidebarLeft",sidebarLeft),sidebarLeft.$inject=[]}(window,angular),function(window,angular){angular.module("userProfile",[])}(window,angular),function(window,angular){function userProfileCtrl($scope,facebookFactory,$state,$http,userFactory,facebookEnums,phonegapFactory,utilFactory){
function init(){if(console.log("user progfile ctrk init"),initMethods(),setUser(),Oracle.DESKTOP){var imageUrl="https://graph.facebook.com/v2.3/"+vm.user.fb_id+"/picture?redirect=true&width="+vm.imageWidth+"&height="+vm.imageWidth;setUserImage(imageUrl)}else downloadUserImage();getUpdatedUserFromServer()}function initMethods(){vm.logoutClicked=logoutClicked,vm.backClicked=backClicked}function backClicked(){console.log("back clicked")}function getUpdatedUserFromServer(){userFactory.updateUserFromServer().then(updateUserFromServerSuccess,updateUserFromServerError)}function updateUserFromServerSuccess(response,status){if(response){var user=response[0];userFactory.updateUserOnLocal(user).then(updateUserOnLocalSuccess,updateUserOnLocalError)}else userFactory.deleteCurrentUserFromLocal().then(deleteCurrentUserFromLocalSuccess,deleteCurrentUserFromLocalError)}function deleteCurrentUserFromLocalSuccess(){$state.go("home.login")}function deleteCurrentUserFromLocalError(){}function updateUserFromServerError(response){console.error("updateUserFromServerError")}function updateUserOnLocalSuccess(savedUser){setUser()}function updateUserOnLocalError(){}function setUser(){var imageWidth;vm.user=userFactory.getCurrentUser(),imageWidth=$(".user-image").outerHeight()-20,vm.imageWidth=imageWidth,vm.userImageStyle={width:imageWidth+"px",height:imageWidth+"px"}}function setUserImage(imgPath){vm.userImageUrl=imgPath}function downloadUserImage(width){phonegapFactory.isFilePresent(profilePicPath).then(profilePicPresent,profilePicAbsent)}function profilePicPresent(fileEntry){vm.userImageUrl=profilePicPath}function profilePicAbsent(imageUrl){var imageUrl="https://graph.facebook.com/v2.0/"+vm.user.fb_id+"/picture?redirect=true&width="+vm.imageWidth+"&height="+vm.imageWidth;phonegapFactory.downloadFile(imageUrl,profilePicPath).then(downloadSuccess,downloadError)}function downloadSuccess(fileUrl){setUserImage(fileUrl)}function downloadError(){}function logoutClicked(){facebookFactory.logout().then(logoutSuccess,function(){alert("logout error")})}function logoutSuccess(){$state.go("home.login")}var vm=this,profilePicPath=phonegapFactory.getStoragePath()+"profilePic.jpg";init()}angular.module("userProfile").controller("userProfileCtrl",userProfileCtrl),userProfileCtrl.$inject=["$scope","facebookFactory","$state","$http","userFactory","facebookEnums","phonegapFactory","utilFactory"]}(window,angular),function(window,angular){angular.module("common",[])}(window,angular),function(window,angular){function facebookEnums(){return{status:{connected:"connected",notAuthorized:"not_anuthorized",unknown:"unknown"}}}angular.module("common").constant("facebookEnums",facebookEnums())}(window,angular),function(window,angular){function urlConfig(){var host="http://ec2-52-24-198-227.us-west-2.compute.amazonaws.com/";return{user:host+"user",fbRelation:host+"fbRelation"}}angular.module("common").constant("urlConfig",urlConfig())}(window,angular),function(window,angular){function mainCtrl($scope,$timeout,facebookFactory,$window,facebookEnums,$state,databaseFactory,userFactory,phonegapFactory,$q){function init(){initMethods(),initListeners()}function initMethods(){}function initListeners(){console.log("main ctrk init"),$q.when(phonegapFactory.isDeviceReady()).then(onDeviceReady,function(){console.error("Device Ready Resolve Rejected")})}function startApp(){console.log("startApp,................"),alert("startApp"),Oracle.DESKTOP&&facebookFactory.browserInit("584636644972667"),Database.isDatabaseInitialized()?(alert("DB initialized - checking for user"),userFactory.getLoggedInUser().then(function(){alert("DB initialized - User Found"),$state.go(".profile")},function(){alert("DB initialized - User Not Found"),$state.go(".login")})):(alert("DB not initialized - checking for user"),Database.initialize(function(){userFactory.getLoggedInUser().then(function(){alert("DB not initialized - User Found"),$state.go(".profile")},function(){alert("DB not initialized - User Not Found"),$state.go(".login")})}))}function onDeviceReady(){console.log("device ready"),startApp()}init()}angular.module("common").controller("mainCtrl",mainCtrl),mainCtrl.$inject=["$scope","$timeout","facebookFactory","$window","facebookEnums","$state","databaseFactory","userFactory","phonegapFactory","$q"]}(window,angular),function(window,angular){function baseFactory($q,$http,$log,uiLoaderFactory){var defaultTimeout=2e4;return{doXHRGet:function(url,params,options){var deferred=$q.defer();return uiLoaderFactory.showLoader(),console.log("2"),$http({method:"GET",url:url,params:params||{},timeout:defaultTimeout}).success(function(data,status,headers,config){uiLoaderFactory.hideLoader(),$log.info(data,status,headers(),config),deferred.resolve(data),console.log("3")}).error(function(data,status,headers,config){uiLoaderFactory.hideLoader(),$log.warn(data,status,headers(),config),deferred.reject(data,status)}),deferred.promise},doXHRPost:function(url,data,options){var deferred=$q.defer();return uiLoaderFactory.showLoader(),$http({method:"POST",url:url,data:data,timeout:defaultTimeout}).success(function(data,status,headers,config){uiLoaderFactory.hideLoader(),$log.info(data,status,headers(),config),deferred.resolve(data,status)}).error(function(data,status,headers,config){uiLoaderFactory.hideLoader(),$log.warn(data,status,headers(),config),deferred.reject(data,status)}),deferred.promise},getServiceURL:function(url){return url}}}angular.module("common").factory("baseFactory",baseFactory),baseFactory.$inject=["$q","$http","$log","uiLoaderFactory"]}(window,angular),function(window,angular){function databaseFactory($q){function initialize(){if(database.isDatabaseInitialized)return!0;var defer=$q.defer();return database.initialize(function(){defer.resolve()}),defer.promise}function execute(query){var defer=$q.defer;return db.transaction(function(tx){tx.executeSql(query,[],function(tx,results){defer.resolve(results.row)})}),defer.promise}function getResultRow(result,index){return result.rows.item(index)}return{initialize:initialize,execute:execute,getResultRow:getResultRow}}angular.module("common").factory("databaseFactory",databaseFactory),databaseFactory.$inject=["$q"]}(window,angular),function(window,angular){function iframeFactory($q,$timeout){function initialize(){window.attachEvent?window.attachEvent("onmessage",processPostMessage):window.addEventListener("message",processPostMessage,!1)}function processPostMessage(event){console.log(".................",event);var message=event.data;"login"===message.eventType?(console.log("....................",window.parent),window.parent.postMessage({eventType:"login_status",status:"success"},"*")):"logout"===message.eventType&&window.parent.postMessage({eventType:"logout_status",status:"success"},"*")}return{initialize:initialize}}angular.module("common").factory("iframeFactory",iframeFactory),iframeFactory.$inject=["$q","$timeout"]}(window,angular),function(window,angular){function phonegapFactory($q){function isDeviceReady(){return deviceReady?!0:deviceReadyDefer.promise}function isFilePresent(filePath){var defer=$q.defer();return window.resolveLocalFileSystemURL(filePath,function(fileEntry){defer.resolve(fileEntry)},function(err){defer.reject(err)}),defer.promise}function getStoragePath(){return"undefined"==typeof window.cordova?"":cordova.file.dataDirectory}function downloadFile(source,target){var defer=$q.defer();if(FileTransfer){var fileTransfer=new FileTransfer;fileTransfer.download(source,target,function(theFile){defer.resolve(theFile.toURL())},function(error){console.log("download error source "+error.source),console.log("download error target "+error.target),console.log("upload error code: "+error.code),defer.reject(error)})}else defer.reject({code:"cordova missing"});return defer.promise}{var deviceReady=!1,deviceReadyDefer=$q.defer();window.requestFileSystem||window.webkitRequestFileSystem,window.resolveLocalFileSystemURL}return window.document.addEventListener("deviceready",function(event){deviceReady=!0,deviceReadyDefer.resolve()},!1),{isDeviceReady:isDeviceReady,isFilePresent:isFilePresent,getStoragePath:getStoragePath,downloadFile:downloadFile}}angular.module("common").factory("phonegapFactory",phonegapFactory),phonegapFactory.$inject=["$q"]}(window,angular),function(window,angular){function stateFactory(){function setPreviousState(stateName,stateParams){stateName&&(previousStateName=stateName,previousStateParams=stateParams?stateParams:{})}function getPreviousState(){return previousStateName?{stateName:previousStateName,params:previousStateParams}:void 0}var previousStateName,previousStateParams={};return{setPreviousState:setPreviousState,getPreviousState:getPreviousState}}angular.module("common").factory("stateFactory",stateFactory),stateFactory.$inject=[]}(window,angular),function(window,angular){function userFactory($q,databaseFactory,baseFactory,urlConfig){function userRelationsCheck(){var defer=$q.defer();return userRelation?defer.resolve():updateUserFromServer().then(function(response){response?updateUserOnLocal(response[0]).then(function(){defer.resolve()},function(){defer.reject()}):defer.reject()},function(){defer.reject()}),defer.promise}function checkRelationWithId(id){return userRelation&&userRelation[id]?!0:!1}function getRelationWithId(id){return userRelation&&userRelation[id]?userRelation[id]:null}function getAllRelations(){return userRelation}function deleteCurrentUserFromLocal(){if(currentUser){var defer=$q.defer();return User.deleteRows({id:currentUser.id},function(){defer.resolve()}),defer.promise}}function postRelation(receiverId,receiverName,type){var url=urlConfig.fbRelation,data={from_id:currentUser.fb_id,from_name:currentUser.name,receiver_name:receiverName,receiver_id:receiverId,type:type};return baseFactory.doXHRPost(url,data,{})}function getLoggedInUser(){var defer=$q.defer();return User.findAllLoggedIn(function(users){console.log("..findAllLoggedIn.....",users),users&&users.length>0?(setCurrentUser(users[0]),defer.resolve(users[0])):defer.reject()}),defer.promise}function updateUserFromServer(){var id=currentUser.id,url=[urlConfig.user,"/",id].join("");return baseFactory.doXHRGet(url,{})}function createUserOnServer(userObj){var url=urlConfig.user;return baseFactory.doXHRPost(url,userObj)}function createUserOnLocal(userObj){var newUser=new User(userObj),defer=$q.defer();return newUser.save(!0,function(createdUser){defer.resolve(createdUser)}),defer.promise}function updateUserOnLocal(val){var defer;return defer=$q.defer(),currentUserModel?(updateUserRelations(val.relations),currentUserModel=angular.extend(currentUserModel,val),currentUserModel.save(function(){setCurrentUser(currentUserModel.dump()),defer.resolve()}),currentUser=currentUserModel.dump()):defer.reject(),defer.promise}function updateUserRelations(relations){var i,l;if(userRelation||(userRelation={}),relations&&relations.length>0)for(i=0,l=relations.length;l>i;i++)userRelation[relations[i].receiver_id]=relations[i]}function addUserRelation(relation){userRelation||(userRelation={}),userRelation[relation.receiver_id]=relation}function setCurrentUser(val){currentUser=val,currentUserModel||(currentUserModel=new User(val))}function getCurrentUser(){return currentUser}function isLoggedIn(){return currentUser?!0:!1}var currentUser,currentUserModel,userRelation;return{getLoggedInUser:getLoggedInUser,createUserOnServer:createUserOnServer,createUserOnLocal:createUserOnLocal,setCurrentUser:setCurrentUser,getCurrentUser:getCurrentUser,isLoggedIn:isLoggedIn,updateUserFromServer:updateUserFromServer,updateUserOnLocal:updateUserOnLocal,postRelation:postRelation,deleteCurrentUserFromLocal:deleteCurrentUserFromLocal,checkRelationWithId:checkRelationWithId,getRelationWithId:getRelationWithId,userRelationsCheck:userRelationsCheck,getAllRelations:getAllRelations,addUserRelation:addUserRelation}}angular.module("common").factory("userFactory",userFactory),userFactory.$inject=["$q","databaseFactory","baseFactory","urlConfig"]}(window,angular),function(window,angular){function utilFactory(){function convertNumberToWords(num){if(num&&!isNaN(Number(num))){var len=num.toString().length,mod=len%3,backLabel=(parseInt(len/3),numToWordMap[len]),frontLabel=num.toString().slice(0,0===mod?3:mod);return frontLabel+" "+backLabel}return"0"}var numToWordMap={1:" ",2:" ",3:" ",4:"K",5:"K",6:"K",7:"Million",8:"Million",9:"Million",10:"Billion",11:"Billion",12:"Billion",13:"Trillion",14:"Trillion",15:"Trillion",16:"Quadrillion",17:"Quadrillion",18:"Quadrillion"};return{convertNumberToWords:convertNumberToWords}}angular.module("common").factory("utilFactory",utilFactory),utilFactory.$inject=[]}(window,angular),function(window,angular){function numToWordFilter(utilFactory){return function(num){return utilFactory.convertNumberToWords(num)}}angular.module("common").filter("numToWordFilter",numToWordFilter),numToWordFilter.$inject=["utilFactory"]}(window,angular),function(window,angular){angular.module(window.APPNAME,["luvhate.templates","mobile-angular-ui","ui.router","common","facebook","login","userProfile","peopleSearch","searchListItem","sidebarLeft","feelsList","feelsListItem","loader","detailsScreen"]),angular.module(window.APPNAME).config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",template:'<div ui-view class="router-view"></div>',controller:"mainCtrl",controllerAs:"vm"}).state("home.login",{templateUrl:"modules/login/partials/Login.html",controller:"loginCtrl",controllerAs:"vm"}).state("home.profile",{templateUrl:"modules/user-profile/partials/UserProfile.html",controller:"userProfileCtrl",controllerAs:"vm"}).state("search",{templateUrl:"modules/people-search/partials/PeopleSearch.html",url:"/search",controller:"peopleSearchCtrl",controllerAs:"vm",resolve:{user:["$q","userFactory",function($q,userFactory){var defer=$q.defer();return userFactory.isLoggedIn()?defer.resolve():defer.reject(),defer.promise}],fbLogin:["facebookFactory",function(facebookFactory){return facebookFactory.isLoggedIn()}],userRelations:["userFactory",function(userFactory){return userFactory.userRelationsCheck()}]}}).state("search.detail",{url:"/search/:id",templateUrl:"modules/details-screen/partials/DetailsScreen.html",controller:"detailsScreenCtrl",controllerAs:"vm"}).state("feelsList",{templateUrl:"modules/feels-list/partials/FeelsList.html",url:"/feelsList",controller:"feelsListCtrl",controllerAs:"vm",resolve:{user:["$q","userFactory",function($q,userFactory){var defer=$q.defer();return userFactory.isLoggedIn()?defer.resolve():defer.reject(),defer.promise}],userRelations:["userFactory",function(userFactory){return userFactory.userRelationsCheck()}]}})}),angular.module(window.APPNAME).run(["$rootScope","$state","stateFactory",function($rootScope,$state,stateFactory){$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){event.preventDefault(),$state.go("home"),console.log("........stateChangeError..........",event,toState,toParams,fromState,fromParams,error)}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams,error){console.log("........stateChangeSuccess..........",event,toState,toParams,fromState,fromParams,error),stateFactory.setPreviousState(fromState.name,fromParams)})}])}(window,angular);